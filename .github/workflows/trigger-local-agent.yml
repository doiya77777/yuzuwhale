name: Trigger Local Agent

on:
  schedule:
    - cron: "0 */6 * * *"
  workflow_dispatch:

jobs:
  trigger:
    runs-on: ubuntu-latest
    environment: Production
    steps:
      - name: Notify Feishu (Start)
        env:
          FEISHU_BOT_WEBHOOK_URL: ${{ secrets.FEISHU_BOT_WEBHOOK_URL }}
        run: |
          if [ -n "$FEISHU_BOT_WEBHOOK_URL" ]; then
            curl -sS -X POST "$FEISHU_BOT_WEBHOOK_URL" \
              -H "Content-Type: application/json" \
              -d "{\"msg_type\":\"text\",\"content\":{\"text\":\"ğŸš€ Yuzu Daily Sync Triggered via GitHub Actions\"}}"
          fi

      - name: Trigger OpenClaw Heartbeat
        run: |
          echo "Triggering OpenClaw local execution..."
          # è¿™é‡Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ·»åŠ å¯¹ OpenClaw API çš„è°ƒç”¨
          # ç›®å‰æˆ‘ä»¬ä¸»è¦ä¾èµ– OpenClaw å†…éƒ¨çš„ cron æœºåˆ¶
